#!/usr/bin/env python3

import json
import requests
from time import time
import sys
import os

default_proto = "http"
default_host = "127.0.0.1"
default_port = "9876"
proto = os.getenv("EA_PROTO", default_proto)
host = os.getenv("EA_HOST", default_host)
port = os.getenv("EA_PORT", default_port)
baseurl = os.getenv("EA_BASEURL", "{}://{}:{}".format(proto, host, port))
headers = {'Content-Type': 'application/json'}
subjects = []
testsubject = -1
seen_alerts = dict()

strmBuffer = " "
Alerts = []
iCase = 0
ans = 0
stopCode = 99

Ns = 192     # number of consecutive data "samples" in test
Nc = 11      # number of data channels sampled

data = [
# Psas
   [
      0.000, 0.000, 0.000, 0.000, 0.050, 0.070, 0.093, 1.005, 1.002, 1.001, 1.005, 0.907,
      0.903, 1.005, 1.002, 1.001, 1.005, 0.907, 1.001, 1.005, 0.070, 0.093, 0.050, 0.070,
      0.907, 1.001, 1.005, 0.962, 1.005, 1.002, 0.903, 0.050, 1.005, 1.002, 1.001, 1.005,
      0.962, 1.005, 1.002, 0.893, 1.005, 1.002, 1.001, 1.005, 1.005, 0.962, 1.005, 1.002,
      0.907, 1.001, 1.005, 0.962, 1.005, 1.002, 0.903, 0.050, 1.005, 0.903, 1.005, 1.002,
      1.002, 0.893, 0.880, 1.005, 0.893, 1.002, 0.973, 0.050, 1.005, 0.903, 1.001, 1.005,
      0.907, 1.001, 1.005, 0.962, 1.005, 1.002, 0.903, 0.050, 1.005, 0.903, 1.005, 1.002,
      0.903, 1.005, 1.002, 1.001, 1.005, 0.907, 1.001, 1.005, 0.070, 0.093, 0.050, 0.070,
      0.907, 1.001, 1.005, 0.962, 1.005, 1.002, 0.903, 0.050, 1.005, 1.002, 1.001, 1.005,
      0.962, 1.005, 1.002, 0.893, 1.005, 1.002, 1.001, 1.005, 1.005, 0.962, 1.005, 1.002,
      0.907, 1.001, 1.005, 0.962, 1.005, 1.002, 0.903, 0.050, 1.005, 0.903, 1.005, 1.002,
      1.002, 0.893, 0.880, 1.005, 0.893, 1.002, 0.973, 0.050, 1.005, 0.903, 1.001, 1.005,
      0.907, 1.001, 1.005, 0.962, 1.005, 1.002, 0.903, 0.050, 1.005, 0.903, 1.005, 1.002,
      1.002, 0.893, 0.880, 1.005, 0.893, 1.002, 0.973, 0.050, 1.005, 0.903, 1.001, 1.005,
      0.907, 1.001, 1.005, 0.962, 1.005, 1.002, 0.903, 0.050, 1.005, 0.903, 1.005, 1.002,
      0.903, 1.005, 1.002, 1.001, 1.005, 0.907, 1.001, 1.005, 0.070, 0.093, 0.050, 0.070
   ],

   # Tas
   [
      48.20, 46.90, 47.20, 47.10, 47.20, 46.90, 47.00, 47.00, 47.03, 47.05, 47.02, 47.01,
      47.02, 46.90, 47.20, 57.01, 57.20, 56.09, 57.00, 57.00, 57.30, 57.50, 57.02, 57.10,
      57.20, 56.90, 57.20, 57.10, 57.20, 56.90, 57.00, 57.00, 57.03, 57.05, 57.02, 57.01,
      57.20, 56.90, 57.02, 57.10, 57.02, 57.05, 57.80, 58.01, 58.06, 58.09, 59.10, 59.10,
      59.30, 59.50, 59.90, 60.01, 60.08, 63.01, 63.00, 69.06, 68.53, 67.36, 67.50, 66.54,
      65.15, 62.84, 61.27, 60.79, 58.71, 57.47, 52.39, 52.79, 53.37, 53.48, 54.42, 53.89,
      54.94, 55.43, 55.48, 56.43, 56.48, 57.15, 57.50, 57.07, 57.17, 57.33, 57.32, 57.61,
      48.20, 46.90, 47.20, 47.10, 47.20, 46.90, 47.00, 47.00, 47.03, 47.05, 47.02, 47.01,
      47.02, 46.90, 47.20, 57.01, 57.20, 56.09, 57.00, 57.00, 57.30, 57.50, 57.02, 57.10,
      57.20, 56.90, 57.20, 57.10, 57.20, 56.90, 57.00, 57.00, 57.03, 57.05, 57.02, 57.01,
      57.20, 56.90, 57.02, 57.10, 57.02, 57.05, 57.80, 58.01, 58.06, 58.09, 59.10, 59.10,
      59.30, 59.50, 59.90, 60.01, 60.08, 63.01, 63.00, 69.06, 68.53, 67.36, 67.50, 66.54,
      65.15, 62.84, 61.27, 60.79, 58.71, 57.47, 52.39, 52.79, 53.37, 53.48, 54.42, 53.89,
      54.94, 55.43, 55.48, 56.43, 56.48, 57.15, 57.50, 57.07, 57.17, 57.33, 57.32, 57.61,
      57.20, 56.90, 57.20, 57.10, 57.20, 56.90, 57.00, 57.00, 57.03, 57.05, 57.02, 57.01,
      57.20, 56.90, 57.02, 57.10, 57.02, 57.05, 57.80, 58.01, 58.06, 58.09, 59.10, 59.10
   ],

   # Tad
   [
      48.20, 46.90, 47.20, 47.10, 47.20, 46.90, 47.00, 47.00, 47.03, 47.05, 47.02, 47.01,
      47.02, 46.90, 47.20, 57.01, 57.20, 56.09, 57.00, 57.00, 57.30, 57.50, 57.02, 57.10,
      57.20, 56.90, 57.20, 57.10, 57.20, 56.90, 57.00, 57.00, 57.03, 57.05, 57.02, 57.01,
      57.20, 56.90, 57.02, 57.10, 57.02, 57.05, 57.80, 58.01, 58.06, 58.09, 59.10, 59.10,
      59.30, 59.50, 59.90, 60.01, 60.08, 63.01, 63.00, 69.06, 68.53, 67.36, 67.50, 66.54,
      65.15, 62.84, 61.27, 60.79, 58.71, 57.47, 52.39, 52.79, 53.37, 53.48, 54.42, 53.89,
      54.94, 55.43, 55.48, 56.43, 56.48, 57.15, 57.50, 57.07, 57.17, 57.33, 57.32, 57.61,
      57.20, 56.90, 57.20, 57.10, 57.20, 56.90, 57.00, 57.00, 57.03, 57.05, 57.02, 57.01,
      57.20, 56.90, 57.02, 57.10, 57.02, 57.05, 57.80, 58.01, 58.06, 58.09, 59.10, 59.10,
      59.30, 59.50, 59.90, 60.01, 60.08, 63.01, 63.00, 69.06, 68.53, 67.36, 67.50, 66.54,
      65.15, 62.84, 61.27, 60.79, 58.71, 57.47, 52.39, 52.79, 53.37, 53.48, 54.42, 53.89,
      54.94, 55.43, 55.48, 56.43, 56.48, 57.15, 57.50, 57.07, 57.17, 57.33, 57.32, 57.61,
      57.20, 56.90, 57.20, 57.10, 57.20, 56.90, 57.00, 57.00, 57.03, 57.05, 57.02, 57.01,
      57.20, 56.90, 57.02, 57.10, 57.02, 57.05, 57.80, 58.01, 58.06, 58.09, 59.10, 59.10,
      59.30, 59.50, 59.90, 60.01, 60.08, 63.01, 63.00, 69.06, 68.53, 67.36, 67.50, 66.54,
      65.15, 62.84, 61.27, 60.79, 58.71, 57.47, 52.39, 52.79, 53.37, 53.48, 54.42, 53.89
   ],

   # Taz (#1)
   #[
   #   68.20, 66.90, 67.20, 67.10, 67.20, 66.90, 67.00, 67.00, 67.03, 67.05, 67.02, 69.01,
   #   71.02, 70.90, 69.20, 71.02, 70.90, 69.20, 71.00, 71.00, 71.05, 70.95, 71.00, 71.05,
   #   71.00, 71.00, 71.05, 70.95, 71.00, 71.05, 69.20, 71.02, 70.90, 69.20, 71.00, 71.65,
   #   71.02, 70.90, 69.20, 71.02, 70.90, 69.20, 71.00, 71.00, 71.05, 70.95, 71.00, 71.05,
   #   68.20, 66.90, 67.20, 67.10, 67.20, 66.90, 67.00, 67.00, 67.03, 67.05, 67.02, 69.01,
   #   71.00, 71.00, 71.05, 70.95, 71.00, 71.05, 69.20, 71.02, 70.90, 69.20, 71.00, 71.65,
   #   71.00, 71.00, 71.05, 70.95, 71.00, 71.05, 69.20, 71.02, 70.90, 69.20, 71.00, 71.65,
   #   71.02, 70.90, 69.20, 71.02, 70.90, 69.20, 71.00, 71.00, 71.05, 70.95, 71.00, 71.05,
   #   71.00, 71.00, 71.05, 70.95, 71.00, 71.05, 69.20, 71.02, 70.90, 69.20, 71.00, 71.65,
   #   71.02, 70.90, 69.20, 71.02, 70.90, 69.20, 71.00, 71.00, 71.05, 70.95, 71.00, 71.05,
   #   68.20, 66.90, 67.20, 67.10, 67.20, 66.90, 67.00, 67.00, 67.03, 67.05, 67.02, 69.01,
   #   71.00, 71.00, 71.05, 70.95, 71.00, 71.05, 69.20, 71.02, 70.90, 69.20, 71.00, 71.65,
   #   71.00, 71.00, 71.05, 70.95, 71.00, 71.05, 69.20, 71.02, 70.90, 69.20, 71.00, 71.65,
   #   71.00, 71.00, 71.05, 70.95, 71.00, 71.05, 69.20, 71.02, 70.90, 69.20, 71.00, 71.65,
   #   71.00, 71.00, 71.05, 70.95, 71.00, 71.05, 69.20, 71.02, 70.90, 69.20, 71.00, 71.65,
   #   71.02, 70.90, 69.20, 71.02, 70.90, 69.20, 71.00, 71.00, 71.05, 70.95, 71.00, 71.05
   #],

   # Taz (#2)
   [
      68.20, 66.90, 67.20, 67.10, 67.20, 66.90, 67.00, 67.00, 67.03, 67.05, 67.02, 69.01,
      71.02, 70.90, 69.20, 71.02, 70.90, 69.20, 71.00, 71.00, 71.05, 70.95, 71.00, 71.05,
      69.00, 67.00, 61.05, 64.95, 64.00, 64.05, 63.20, 62.02, 60.90, 59.20, 59.00, 58.65,
      52.02, 47.90, 47.20, 47.02, 47.90, 47.20, 41.00, 41.00, 41.05, 45.95, 49.00, 51.05,
      58.20, 56.90, 57.20, 62.10, 63.20, 66.90, 67.00, 67.00, 67.03, 67.05, 67.02, 69.01,
      71.00, 71.00, 71.05, 70.95, 71.00, 71.05, 69.20, 71.02, 70.90, 69.20, 71.00, 71.65,
      71.00, 71.00, 71.05, 70.95, 71.00, 71.05, 69.20, 71.02, 70.90, 69.20, 71.00, 71.65,
      71.02, 70.90, 69.20, 71.02, 70.90, 69.20, 71.00, 71.00, 71.05, 70.95, 71.00, 71.05,
      71.00, 71.00, 71.05, 70.95, 71.00, 71.05, 69.20, 71.02, 70.90, 69.20, 71.00, 71.65,
      71.02, 70.90, 69.20, 71.02, 70.90, 69.20, 71.00, 71.00, 71.05, 70.95, 71.00, 71.05,
      68.20, 66.90, 67.20, 67.10, 67.20, 66.90, 67.00, 67.00, 67.03, 67.05, 67.02, 69.01,
      71.00, 71.00, 71.05, 70.95, 71.00, 71.05, 69.20, 71.02, 70.90, 69.20, 71.00, 71.65,
      71.00, 71.00, 71.05, 70.95, 71.00, 71.05, 69.20, 71.02, 70.90, 69.20, 71.00, 71.65,
      71.00, 71.00, 71.05, 70.95, 71.00, 71.05, 69.20, 71.02, 70.90, 69.20, 71.00, 71.65,
      71.00, 71.00, 71.05, 70.95, 71.00, 71.05, 69.20, 71.02, 70.90, 69.20, 71.00, 71.65,
      71.02, 70.90, 69.20, 71.02, 70.90, 69.20, 71.00, 71.00, 71.05, 70.95, 71.00, 71.05
   ],

   # TazSetHtg
   [
      65.00, 65.00, 65.00, 65.00, 65.00, 65.00, 65.00, 65.00, 65.00, 67.00, 67.00, 67.00,
      65.00, 65.00, 65.00, 65.00, 65.00, 65.00, 65.00, 65.00, 65.00, 67.00, 67.00, 67.00,
      65.00, 65.00, 65.00, 65.00, 65.00, 65.00, 65.00, 65.00, 65.00, 67.00, 67.00, 67.00,
      65.00, 65.00, 65.00, 65.00, 65.00, 65.00, 65.00, 65.00, 65.00, 67.00, 67.00, 67.00,
      65.00, 65.00, 65.00, 65.00, 65.00, 65.00, 65.00, 65.00, 65.00, 67.00, 67.00, 67.00,
      65.00, 65.00, 65.00, 65.00, 65.00, 65.00, 65.00, 65.00, 65.00, 67.00, 67.00, 67.00,
      65.00, 65.00, 65.00, 65.00, 65.00, 65.00, 65.00, 65.00, 65.00, 67.00, 67.00, 67.00,
      67.00, 67.00, 67.00, 67.00, 67.00, 67.00, 67.00, 67.00, 67.00, 67.00, 67.00, 67.00,
      67.00, 67.00, 67.00, 67.00, 67.00, 67.00, 67.00, 67.00, 67.00, 67.00, 67.00, 67.00,
      67.00, 67.00, 67.00, 67.00, 67.00, 67.00, 67.00, 67.00, 67.00, 67.00, 67.00, 67.00,
      67.00, 67.00, 67.00, 67.00, 67.00, 67.00, 67.00, 67.00, 67.00, 67.00, 67.00, 67.00,
      67.00, 67.00, 67.00, 67.00, 67.00, 67.00, 67.00, 67.00, 67.00, 67.00, 67.00, 67.00,
      67.00, 67.00, 67.00, 67.00, 67.00, 67.00, 67.00, 67.00, 67.00, 67.00, 67.00, 67.00,
      67.00, 67.00, 67.00, 67.00, 67.00, 67.00, 67.00, 67.00, 67.00, 67.00, 67.00, 67.00,
      67.00, 67.00, 67.00, 67.00, 67.00, 67.00, 67.00, 67.00, 67.00, 67.00, 67.00, 67.00,
      67.00, 67.00, 67.00, 67.00, 67.00, 67.00, 67.00, 67.00, 67.00, 67.00, 67.00, 67.00
   ],

   # TazSetClg
   [
      75.00, 75.00, 75.00, 75.00, 75.00, 75.00, 70.00, 70.00, 70.00, 70.00, 70.00, 70.00,
      75.00, 75.00, 75.00, 75.00, 75.00, 75.00, 70.00, 70.00, 70.00, 70.00, 70.00, 70.00,
      75.00, 75.00, 75.00, 75.00, 75.00, 75.00, 70.00, 70.00, 70.00, 70.00, 70.00, 70.00,
      75.00, 75.00, 75.00, 75.00, 75.00, 75.00, 70.00, 70.00, 70.00, 70.00, 70.00, 70.00,
      75.00, 75.00, 75.00, 75.00, 75.00, 75.00, 70.00, 70.00, 70.00, 70.00, 70.00, 70.00,
      75.00, 75.00, 75.00, 75.00, 75.00, 75.00, 70.00, 70.00, 70.00, 70.00, 70.00, 70.00,
      75.00, 75.00, 75.00, 75.00, 75.00, 75.00, 70.00, 70.00, 70.00, 70.00, 70.00, 70.00,
      72.00, 72.00, 72.00, 72.00, 72.00, 72.00, 72.00, 72.00, 72.00, 72.00, 72.00, 72.00,
      72.00, 72.00, 72.00, 72.00, 72.00, 72.00, 72.00, 72.00, 72.00, 72.00, 72.00, 72.00,
      72.00, 72.00, 72.00, 72.00, 72.00, 72.00, 72.00, 72.00, 72.00, 72.00, 72.00, 72.00,
      72.00, 72.00, 72.00, 72.00, 72.00, 72.00, 72.00, 72.00, 72.00, 72.00, 72.00, 72.00,
      72.00, 72.00, 72.00, 72.00, 72.00, 72.00, 72.00, 72.00, 72.00, 72.00, 72.00, 72.00,
      72.00, 72.00, 72.00, 72.00, 72.00, 72.00, 72.00, 72.00, 72.00, 72.00, 72.00, 72.00,
      72.00, 72.00, 72.00, 72.00, 72.00, 72.00, 72.00, 72.00, 72.00, 72.00, 72.00, 72.00,
      72.00, 72.00, 72.00, 72.00, 72.00, 72.00, 72.00, 72.00, 72.00, 72.00, 72.00, 72.00,
      72.00, 72.00, 72.00, 72.00, 72.00, 72.00, 72.00, 72.00, 72.00, 72.00, 72.00, 72.00
   ],

   # Zvh
   [
      0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.040, 0.548, 0.556, 0.547,
      0.356, 0.465, 0.465, 0.475, 0.481, 0.421, 0.452, 0.434, 0.444, 0.475, 0.431, 0.466,
      0.465, 0.475, 0.481, 0.421, 0.452, 0.434, 0.494, 0.475, 0.431, 0.481, 0.421, 0.452,
      0.431, 0.475, 0.451, 0.421, 0.452, 0.452, 0.434, 0.444, 0.475, 0.481, 0.452, 0.434,
      0.421, 0.452, 0.452, 0.434, 0.444, 0.452, 0.434, 0.444, 0.475, 0.431, 0.466, 0.475,
      0.465, 0.475, 0.481, 0.421, 0.452, 0.434, 0.444, 0.444, 0.475, 0.481, 0.356, 0.465,
      0.415, 0.321, 0.292, 0.252, 0.234, 0.291, 0.222, 0.221, 0.222, 0.219, 0.220, 0.225,
      0.356, 0.465, 0.465, 0.475, 0.481, 0.421, 0.452, 0.434, 0.444, 0.475, 0.431, 0.466,
      0.465, 0.475, 0.481, 0.421, 0.452, 0.434, 0.494, 0.475, 0.431, 0.481, 0.421, 0.452,
      0.431, 0.475, 0.451, 0.421, 0.452, 0.452, 0.434, 0.444, 0.475, 0.481, 0.452, 0.434,
      0.421, 0.452, 0.452, 0.434, 0.444, 0.452, 0.434, 0.444, 0.475, 0.431, 0.466, 0.475,
      0.465, 0.475, 0.481, 0.421, 0.452, 0.434, 0.444, 0.444, 0.475, 0.481, 0.356, 0.465,
      0.415, 0.321, 0.292, 0.252, 0.234, 0.291, 0.222, 0.221, 0.222, 0.219, 0.220, 0.225,
      0.421, 0.452, 0.452, 0.434, 0.444, 0.452, 0.434, 0.444, 0.475, 0.431, 0.466, 0.475,
      0.465, 0.475, 0.481, 0.421, 0.452, 0.434, 0.444, 0.444, 0.475, 0.481, 0.356, 0.465,
      0.415, 0.321, 0.292, 0.252, 0.234, 0.291, 0.222, 0.221, 0.222, 0.219, 0.220, 0.225
   ],

   # Zd
   [
      1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 0.940, 0.848, 0.856, 0.847,
      0.756, 0.765, 0.765, 0.775, 0.681, 0.621, 0.552, 0.534, 0.544, 0.575, 0.531, 0.566,
      0.565, 0.575, 0.581, 0.421, 0.452, 0.434, 0.494, 0.475, 0.431, 0.481, 0.421, 0.452,
      0.431, 0.475, 0.451, 0.421, 0.452, 0.452, 0.434, 0.444, 0.475, 0.481, 0.452, 0.434,
      0.421, 0.452, 0.452, 0.434, 0.444, 0.452, 0.434, 0.444, 0.475, 0.531, 0.566, 0.575,
      0.565, 0.575, 0.581, 0.521, 0.552, 0.534, 0.544, 0.544, 0.575, 0.581, 0.556, 0.565,
      0.515, 0.421, 0.392, 0.352, 0.334, 0.391, 0.322, 0.321, 0.322, 0.319, 0.320, 0.325,
      0.421, 0.452, 0.452, 0.434, 0.444, 0.452, 0.434, 0.444, 0.475, 0.431, 0.466, 0.475,
      0.465, 0.475, 0.481, 0.421, 0.452, 0.434, 0.444, 0.444, 0.475, 0.481, 0.356, 0.465,
      0.415, 0.321, 0.292, 0.252, 0.234, 0.291, 0.222, 0.221, 0.222, 0.219, 0.220, 0.225,
      0.421, 0.452, 0.452, 0.434, 0.444, 0.452, 0.434, 0.444, 0.475, 0.531, 0.566, 0.575,
      0.565, 0.575, 0.581, 0.521, 0.552, 0.534, 0.544, 0.544, 0.575, 0.581, 0.556, 0.565,
      0.515, 0.421, 0.392, 0.352, 0.334, 0.391, 0.322, 0.321, 0.322, 0.319, 0.320, 0.325,
      0.421, 0.452, 0.452, 0.434, 0.444, 0.452, 0.434, 0.444, 0.475, 0.431, 0.466, 0.475,
      0.465, 0.475, 0.481, 0.421, 0.452, 0.434, 0.444, 0.444, 0.475, 0.481, 0.356, 0.465,
      0.415, 0.321, 0.292, 0.252, 0.234, 0.291, 0.222, 0.221, 0.222, 0.219, 0.220, 0.225
   ],

   # Qa
   [
      934.2, 953.4, 965.3, 912.4, 954.3, 923.5, 893.4, 799.4, 734.6, 740.9, 741.0, 743.2,
      740.9, 741.0, 743.2, 742.9, 741.5, 741.2, 741.3, 742.2, 741.9, 742.5, 742.5, 747.9,
      740.9, 741.0, 743.2, 752.9, 751.3, 741.2, 751.3, 752.2, 749.9, 752.5, 752.5, 749.9,
      743.2, 752.9, 751.3, 741.2, 751.3, 752.2, 749.9, 752.9, 751.3, 741.2, 721.3, 692.9,
      680.9, 671.0, 663.2, 652.9, 651.3, 641.2, 651.3, 652.2, 649.9, 652.5, 652.5, 649.9,
      663.2, 652.9, 651.3, 641.2, 651.3, 652.2, 649.9, 652.9, 651.3, 641.2, 651.3, 641.2,
      743.2, 752.9, 751.3, 741.2, 751.3, 752.2, 749.9, 752.9, 751.3, 741.2, 721.3, 692.9,
      700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0,
      700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0,
      700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0,
      700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0,
      700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0,
      700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0,
      700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0,
      700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0,
      700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0
   ],

   # QaSet
   [
      934.2, 953.4, 965.3, 912.4, 954.3, 923.5, 893.4, 799.4, 734.6, 740.9, 741.0, 743.2,
      740.9, 741.0, 743.2, 742.9, 741.5, 741.2, 741.3, 742.2, 741.9, 742.5, 742.5, 747.9,
      740.9, 741.0, 743.2, 752.9, 751.3, 741.2, 751.3, 752.2, 749.9, 752.5, 752.5, 749.9,
      743.2, 752.9, 751.3, 741.2, 751.3, 752.2, 749.9, 752.9, 751.3, 741.2, 721.3, 692.9,
      680.9, 671.0, 663.2, 652.9, 651.3, 641.2, 651.3, 652.2, 649.9, 652.5, 652.5, 649.9,
      663.2, 652.9, 651.3, 641.2, 651.3, 652.2, 649.9, 652.9, 651.3, 641.2, 651.3, 641.2,
      743.2, 752.9, 751.3, 741.2, 751.3, 752.2, 749.9, 752.9, 751.3, 741.2, 721.3, 692.9,
      700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0,
      700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0,
      700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0,
      700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0,
      700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0,
      700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0,
      700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0,
      700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0,
      700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0, 700.0
   ],

   # Bocc
   [
      0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000,
      0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000,
      0.000, 0.000, 0.000, 0.000, 0.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000,
      1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000,
      1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000,
      1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000,
      1.000, 1.000, 1.000, 1.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000,
      1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000,
      1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000,
      1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000,
      1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000,
      1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000,
      1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000,
      1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000,
      1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000,
      1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000, 1.000
   ]
]

def GetSubjects():  # TODO: only return VAV subjects!
    global subjects, baseurl, headers
    url = "{}{}".format(baseurl, "/domain")
    response = requests.get(url, headers=headers)
    assert response.status_code >= 200 and response.status_code <= 299
    subjects = response.json().get("subjectkeys")

def SetCurrentTM(timestamp):
    global baseurl, headers
    url = "{}{}".format(baseurl, "/ctrl/time")
    body = {'time': timestamp}
    response = requests.put(url, headers=headers, json=body)
    assert response.status_code >= 200 and response.status_code <= 299
    #print("SetCurrentTM({}) succeeded".format(timestamp))

def SetCurrentSamples(subject, samples):
    global baseurl, headers
    url = "{}{}".format(baseurl, "/ctrl/sample")
    body = {'subject': subject, 'values': samples}
    response = requests.put(url, headers=headers, json=body)
    assert response.status_code >= 200 and response.status_code <= 299
    #print("SetCurrentSamples() succeeded")

def SampleTimeStep(timestamp, samples):
    global subjects, baseurl, headers
    for s in subjects:
        url = "{}{}".format(baseurl, "/ctrl/sampletimestep")
        body = {'subject': s, 'values': samples, 'time': timestamp}
        response = requests.put(url, headers=headers, json=body)
        assert response.status_code >= 200 and response.status_code <= 299
    #print("SetCurrentSamples() succeeded")

def SingleStepDomainOnTimeAndInputs():
    global baseurl, headers
    url = "{}{}".format(baseurl, '/ctrl/singlestep')
    response = requests.post(url, headers=headers)
    assert response.status_code >= 200 and response.status_code <= 299
    #print("SingleStepDomainOnTimeAndInputs() succeeded")

def SayNewAlertsFifoFromDomainThenClear():
    global seen_alerts, baseurl, headers
    newalerts = []
    url = "{}{}".format(baseurl, '/alerts')
    response = requests.get(url, headers=headers)
    assert response.status_code >= 200 and response.status_code <= 299
    for a in response.json().get("alerts"):
        if a["id"] not in seen_alerts:
            newalerts.append(a["message"])
            seen_alerts[a["id"]] = 1
    return newalerts

def SayCaseKeys(subject):
    global baseurl, headers
    url = "{}{}".format(baseurl, '/casekeys')
    body = {'subject': subject}
    response = requests.get(url, headers=headers, json=body)
    assert response.status_code >= 200 and response.status_code <= 299
    casekeys = response.json().get("casekeys")
    #print("SayCaseKeys() returned ", casekeys)
    return casekeys

def SayCase(c,subject):
    global baseurl, headers
    url = "{}{}".format(baseurl, '/case')
    body = {'key': c, 'subject':subject}
    response = requests.get(url, headers=headers, json=body)
    assert response.status_code >= 200 and response.status_code <= 299
    case = response.json()
    #print("SayCase({}) returned ".format(c), case)
    return case

def SayFeatureKeys(subject):
    global baseurl, headers
    url = "{}{}".format(baseurl, '/featurekeys')
    body = {'subject': subject}
    response = requests.get(url, headers=headers, json=body)
    assert response.status_code >= 200 and response.status_code <= 299
    featurekeys = response.json().get("featurekeys")
    #print("SayFeatureKeys() returned ", featurekeys)
    return featurekeys

def SayFeature(f):
    global baseurl, headers
    url = "{}{}".format(baseurl, '/feature')
    body = {'key': f}
    response = requests.get(url, headers=headers, json=body)
    assert response.status_code >= 200 and response.status_code <= 299
    feature = response.json()
    #print("SayFeature({}) returned ".format(k), feature)
    return feature


GetSubjects()
testsubject = subjects[-1]

tdsNow = time()

j = 0

for ii in range(0, 1):
    for s in range(Ns):
        j = j + 1

        sample = [data[c][s] for c in range(Nc)]

        #sample = []
        #for channel in range(Nc):
        #    sample.append(data[channel][s])

        #  Call method on port object that passes a value for each channel object inside DLL
        #  Order of values in array = order corresponding channels were created in DLL tool.cpp

        for subj in subjects:
            SetCurrentSamples( subj, sample )
        #SampleTimeStep(tdsNow, sample)  # Consolidates SetCurrentSamples, SetCurrentTM, and SingleStepAFDD

        #  all chans have a new data value

        # tmNow = time.localtime(tdsNow)

        SetCurrentTM( tdsNow )

        tdsNow += 60


        SingleStepDomainOnTimeAndInputs()

#       std::cout << "vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv" << std::endl
        print("Single step {} taken.".format(j))

        alertsNow = SayNewAlertsFifoFromDomainThenClear()
        for a in alertsNow:
            print(a)

        feature0_keys = SayFeatureKeys(subjects[0])
        for fid in feature0_keys:
            f = SayFeature(fid)
            print(f.get("label"))
            print(f.get("message"))
            print(f.get("messagecolor"))


# Dan's code comments this after the API update out but I need it to validate
for s in subjects:
    casekeys = SayCaseKeys(s)
    for cid in casekeys:
        print("")
        c = SayCase(cid,s)
        error = c.get("error")
        if error is None:
            label = c.get("label")
            report = c.get("report")
            print("WARNING: case {} from subject {}: {}: {}".format(cid, s, c.get("label"), c.get("report")))
        else:
            print("ERROR: case {} from subject {}: SayCase failed".format(cid, s))

#print( SayNumKnobsTracePaneKrono( 0, 4, 1 ) )
#stackStrVecE = SayKnobLabelsTracePaneKrono( 0, 4, 1 )
#stackStrVecF = SayKnobRangesTracePaneKrono( 0, 4, 1 )
#stackStrVecG = GetKnobValuesTracePaneKrono( 0, 4, 1 )
#
#print("vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv")
#for strElement in stackStrVecE:
#    print(strElement)
#
#print("''''''''''''''''''''''''''''''")
#for strElement in stackStrVecF:
#    print(strElement)
#
#print("''''''''''''''''''''''''''''''")
#for strElement in stackStrVecG:
#    print(strElement)
#
#print(SayNumKnobsTracePaneKrono(1, 4, 1))
#stackStrVecE = SayKnobLabelsTracePaneKrono(1, 4, 1)
#stackStrVecF = SayKnobRangesTracePaneKrono(1, 4, 1)
#stackStrVecG = GetKnobValuesTracePaneKrono(1, 4, 1)
#
#print("vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv")
#for strElement in stackStrVecE:
#    print(strElement)
#
#print("''''''''''''''''''''''''''''''")
#for strElement in stackStrVecF:
#    print(strElement)
#
#print("''''''''''''''''''''''''''''''")
#for strElement in stackStrVecG:
#    print(strElement)
